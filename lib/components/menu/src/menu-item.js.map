{"version":3,"file":"menu-item.js","sources":["../../../../../../packages/components/menu/src/menu-item.vue"],"sourcesContent":["<template>\n  <li\n    :class=\"[\n      nsMenuItem.b(),\n      nsMenuItem.is('active', active),\n      nsMenuItem.is('disabled', disabled),\n    ]\"\n    role=\"menuitem\"\n    tabindex=\"-1\"\n    @click=\"handleClick\"\n  >\n    <el-tooltip\n      v-if=\"\n        parentMenu.type.name === 'ElMenu' &&\n        rootMenu.props.collapse &&\n        $slots.title\n      \"\n      :effect=\"rootMenu.props.popperEffect\"\n      placement=\"right\"\n      :fallback-placements=\"['left']\"\n      persistent\n    >\n      <template #content>\n        <slot name=\"title\" />\n      </template>\n      <div :class=\"nsMenu.be('tooltip', 'trigger')\">\n        <slot />\n      </div>\n    </el-tooltip>\n    <template v-else>\n      <slot />\n      <slot name=\"title\" />\n    </template>\n  </li>\n</template>\n\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  toRef,\n} from 'vue'\nimport ElTooltip from '@element-plus/components/tooltip'\nimport { throwError } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport useMenu from './use-menu'\nimport { menuItemEmits, menuItemProps } from './menu-item'\n\nimport type { MenuItemRegistered, MenuProvider, SubMenuProvider } from './types'\n\nconst COMPONENT_NAME = 'ElMenuItem'\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    ElTooltip,\n  },\n\n  props: menuItemProps,\n  emits: menuItemEmits,\n\n  setup(props, { emit }) {\n    const instance = getCurrentInstance()!\n    const rootMenu = inject<MenuProvider>('rootMenu')\n    const nsMenu = useNamespace('menu')\n    const nsMenuItem = useNamespace('menu-item')\n    if (!rootMenu) throwError(COMPONENT_NAME, 'can not inject root menu')\n\n    const { parentMenu, indexPath } = useMenu(instance, toRef(props, 'index'))\n\n    const subMenu = inject<SubMenuProvider>(`subMenu:${parentMenu.value.uid}`)\n    if (!subMenu) throwError(COMPONENT_NAME, 'can not inject sub menu')\n\n    const active = computed(() => props.index === rootMenu.activeIndex)\n    const item: MenuItemRegistered = reactive({\n      index: props.index,\n      indexPath,\n      active,\n    })\n\n    const handleClick = () => {\n      if (!props.disabled) {\n        rootMenu.handleMenuItemClick({\n          index: props.index,\n          indexPath: indexPath.value,\n          route: props.route,\n        })\n        subMenu.handleMouseleave?.()\n        emit('click', item)\n      }\n    }\n\n    onMounted(() => {\n      subMenu.addSubMenu(item)\n      rootMenu.addMenuItem(item)\n    })\n\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item)\n      rootMenu.removeMenuItem(item)\n    })\n\n    return {\n      parentMenu,\n      rootMenu,\n      active,\n      nsMenu,\n      nsMenuItem,\n      handleClick,\n    }\n  },\n})\n</script>\n"],"names":["defineComponent","ElTooltip","menuItemProps","menuItemEmits","getCurrentInstance","inject","useNamespace","throwError","useMenu","computed","reactive","onMounted","onBeforeUnmount","_resolveComponent","_openBlock","_createElementBlock","_normalizeClass","_createBlock","_renderSlot","_withCtx","_createElementVNode","_export_sfc"],"mappings":"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"}